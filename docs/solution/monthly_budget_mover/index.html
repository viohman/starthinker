




<!DOCTYPE html>
<html>
  <head>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-167283455-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-167283455-3');
    </script>

    <link rel="shortcut icon" href="https://storage.googleapis.com/starthinker-ui/favicon.ico" type="image/x-icon">
    <link rel="icon" href="https://storage.googleapis.com/starthinker-ui/favicon.ico" type="image/x-icon">

    <!--Import Google Icon Font-->
    <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined" rel="stylesheet">
    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://storage.googleapis.com/starthinker-ui/css/materialize-1.0.0.min.css">

    <style>
      html { color: rgba(68,68,68,1); font-family: Roboto, sans-serif; }

      .material-icons { line-height: normal; vertical-align: middle; }

      #message { justify-content: center; font-size: 2em;}
      #message i { font-size: 2em; margin: 10px; }
      #message ul, #message li { display: inline; margin-left: 10px; }
      #page { width: 100%; max-width: 1280px; min-height: 500px; margin: 0px auto; padding-bottom: 50px; }

      div.nav-wrapper { padding-left: 1%; padding-right: 1%; }
      h1 a i.material-icons { font-size: 4rem; }
      a.brand-logo img { vertical-align: middle; width: 40px; height: 40px; }
      ol li { line-height: 1.8em; }
      textarea { margin-top: 7px; height: 10rem; }
      table.list { width: 96%; max-width: 800px; margin: 1vh auto; line-height: 1.8em; }
      a.menu_link, span.menu_link { display: inline-block; margin: 8px; }

      div.row { display: flex; align-items: flex-start; justify-content: center; flex-wrap: wrap; }

      #cards div.card { width: 300px; margin: 20px; padding: 0.1px; text-align: left; }
      div.card h4 { width 100%; padding: 20px;}
      div.card h4 i.material-icons { font-size: 2.28rem; }
      div.card table { margin: 0px 5% 30px 5%; width: 90%; }

      .card .card-content .card-title { word-wrap: break-word; }
      div.input-field { padding-top: 0.1px; margin-top: 2.4em;}

      div.switch { padding-top: 1rem; padding-bottom: 1rem; }
      div.switch label { font-size: 1.05rem; }
      div.switch label:first-child { font-size: 1.3rem; margin-right: 40px; }

      p.flow-text { font-weight: 100; }
      i.right { margin: 0px 15px; font-size: 1.5rem;}
      .collapsible-body { padding: 0px; }

      
  #solution_image { margin: 30px auto; width: 80%; max-width: 800px; height: auto; display: block; }
  .btn-large { margin: 1vh 1vw; }
  .col { margin-right: auto; }
  pre.expand_code { height: 70vh; overflow: hidden; }
  pre.expand_code span { position: absolute; right: 0px; margin: 15px; cursor: pointer; }

    </style>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>

  
    <nav class="green lighten-0">
      <div class="nav-wrapper">
        <a href="/starthinker/" class="brand-logo">
          <img src="https://storage.googleapis.com/starthinker-ui/StarThinker.png"/>&nbsp;StarThinker
        </a>
        <a href="#" data-target="mobile-menu" class="sidenav-trigger"><i class="material-icons">menu</i></a>

        <ul id="nav-mobile" class="right hide-on-med-and-down">
          
          
          <li><a href="/starthinker/solution/">Solutions</a></li>
          <li><a href="/starthinker/help/">Help</a></li>
          
        </ul>
      </div>
    </nav>

    <ul class="sidenav green lighten-1" id="mobile-menu">
      
      
      
      <li><a class="white-text" href="/starthinker/solution/">Solutions</a></li>
      <li><a class="white-text" href="/starthinker/help/">Help</a></li>
      
    </ul>
  

  <body>
    <!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="https://storage.googleapis.com/starthinker-ui/js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="https://storage.googleapis.com/starthinker-ui/js/materialize-1.0.0.min.js"></script>

    


<!--
Start of Floodlight Tag: Please do not remove
Activity name of this tag: Gallery Conversions
URL of the webpage where the tag is expected to be placed: https://google.github.io/starthinker/
This tag must be placed between the <body> and </body> tags, as close as possible to the opening tag.
Creation Date: 03/09/2020
-->
<script type="text/javascript">
var axel = Math.random() + "";
var a = axel * 10000000000000;
document.write('<img src="https://ad.doubleclick.net/ddm/activity/src=8657867;type=github;cat=galle0;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=' + a + '?" width="1" height="1" alt=""/>');
</script>
<noscript>
<img src="https://ad.doubleclick.net/ddm/activity/src=8657867;type=github;cat=galle0;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1?" width="1" height="1" alt=""/>
</noscript>
<!-- End of Floodlight Tag: Please do not remove -->



    

    <div id="page" class="center">
      

  <br/>
  <h1><i class="medium material-icons">perm_phone_msg</i>&nbsp; Monthly Budget Mover</h1>
  <p class="flow-text">Apply the previous month's budget/spend delta to the current month.  Aggregate up the budget and spend from the previous month of each category declared then apply the delta of the spend and budget equally to each Line Item under that Category.</p>

  <a class="trigger_category menu_link waves-effect waves-dark btn-flat grey lighten-2" href="/starthinker/solution/">All</a>
  

  <br/><br/>
  

  <img id="solution_image" src="https://storage.googleapis.com/starthinker-ui/MonthlyBudgetMover.png"/>

  <div class="buttons">

    <a class="btn-large blue waves-effect waves-light" href="https://groups.google.com/d/forum/starthinker-assets" target="_blank">
      <i class="material-icons right">lock_open</i>Get Access
    </a>

    

    

    

    <br/>

    

    
      <a class="btn-large blue waves-effect waves-light" href="https://github.com/google/starthinker/blob/master/scripts/monthly_budget_mover.json" target="_blank">
        <i class="material-icons right">list</i>Git Hub
      </a>
      <a class="btn-large blue waves-effect waves-light" href="https://colab.research.google.com/github/google/starthinker/blob/master/colabs/monthly_budget_mover.ipynb" target="_blank">
        <i class="material-icons right">copyright</i>Data Pill Colab
      </a>
      <a class="btn-large blue waves-effect waves-light" href="https://github.com/google/starthinker/blob/master/dags/monthly_budget_mover_dag.py" target="_blank">
        <i class="material-icons right">copyright</i>Airflow DAG
      </a>
    

  </div>

  <br/><br/>

  <div class="row">
    
      <div class="col s12 m6 l4">
        <div class="card">
          <table class="bordered">
            <thead>
              <tr>
                <th>Value Proposition</th>
              </tr>
             </thead>
             <tbody>
             
               <tr>
                 <td>Saves on the time to manually move Insertion Order budgets from month to month.</td>
               </tr>
             
               <tr>
                 <td>Allows you to categorize line items into categories, then the tool will aggregate up all the spend and budget for those line items and determine any remaining or negative budget.  Then it will spread that amount equally across all of the Line Items in that category.</td>
               </tr>
             
             </tbody>
          </table>
        </div>
      </div>
    

    
      <div class="col s12 m6 l4">
        <div class="card">
          <table class="bordered">
            <thead>
              <tr>
                <th>Impact</th>
                <th>Level</th>
              </tr>
             </thead>
               <tbody>
               
                 <tr>
                   <td>Account Health</td>
                   <td>
                     <div class="progress">
                       <div class="determinate" style="width: 20%"></div>
                     </div>
                   </td>
                 </tr>
               
                 <tr>
                   <td>Csat Improvement</td>
                   <td>
                     <div class="progress">
                       <div class="determinate" style="width: 50%"></div>
                     </div>
                   </td>
                 </tr>
               
                 <tr>
                   <td>Time Savings</td>
                   <td>
                     <div class="progress">
                       <div class="determinate" style="width: 100%"></div>
                     </div>
                   </td>
                 </tr>
               
                 <tr>
                   <td>Technical Level</td>
                   <td>
                     <div class="progress">
                       <div class="determinate" style="width: 10%"></div>
                     </div>
                   </td>
                 </tr>
               
                 <tr>
                   <td>Spend Growth</td>
                   <td>
                     <div class="progress">
                       <div class="determinate" style="width: 90%"></div>
                     </div>
                   </td>
                 </tr>
               
                 <tr>
                   <td>Spend Optimization</td>
                   <td>
                     <div class="progress">
                       <div class="determinate" style="width: 80%"></div>
                     </div>
                   </td>
                 </tr>
               
             </tbody>
          </table>
        </div>
      </div>
    

    <div class="col s12 m6 l4">
      <div class="card">
        <table class="bordered">
          <thead>
            <tr>
              <th colspan="2">Details</th>
            </tr>
           </thead>
          <tbody>

            
            <tr>
              <td colspan="2">This solution has anonymized data and is OK to share with clients.</td>
            </tr>
            

            <tr>
              <td>Age</td>
              <td>May 23, 2019 (1 year, 3 months)</td>
            </tr>

            <tr>
              <td>Authors</td>
              <td><a href="mailto:terwilleger@google.com?subject=Request+For+A+Monthly+Budget+Mover+StarThinker+Solution&body=Hi%2C%0A%0AI%27d+like+to+learn+more+about+the+Monthly+Budget+Mover+solution.%0A%0AStarThinker+Link%3A+http%3A%2F%2Flocalhost%3A8000%2Fsolution%2Fmonthly_budget_mover%2F%0A%0ACan+we+set+up+some+time+to+over+it%3F%0A%0AThanks" target="_blank">terwilleger@google.com</a>
              </td>
            </tr>

          </tbody>
        </table>
      </div>
    </div>

   
      <div class="col s12 m6 l4">
        <div class="card">
          <table class="bordered">
          <thead>
              <tr>
                <th>Instructions</th>
              </tr>
             </thead>
             <tbody>
             
               <tr>
                 <td>No changes made can be made in DV360 from the start to the end of this process</td>
               </tr>
             
               <tr>
                 <td>Make sure there is budget information for the current and previous month's IOs in DV360</td>
               </tr>
             
               <tr>
                 <td>Make sure the provided spend report has spend data for every IO in the previous month</td>
               </tr>
             
               <tr>
                 <td>Spend report must contain 'Revenue (Adv Currency)' and 'Insertion Order ID'</td>
               </tr>
             
               <tr>
                 <td>There are no duplicate IO Ids in the categories outlined below</td>
               </tr>
             
               <tr>
                 <td>This process must be ran during the month of the budget it is updating</td>
               </tr>
             
               <tr>
                 <td>If you receive a 502 error then you must separate your jobs into two, because there is too much information being pulled in the sdf</td>
               </tr>
             
               <tr>
                 <td>Manually run this job</td>
               </tr>
             
               <tr>
                 <td>Once the job has completed go to the table for the new sdf and export to a csv</td>
               </tr>
             
               <tr>
                 <td>Take the new sdf and upload it into DV360</td>
               </tr>
             
             </tbody>
          </table>
        </div>
       </div>
     

    <div class="col s12 m12 l8">
      <pre class="card expand_code left-align"><span class="expand_code waves-light">Workflow<i class="material-icons medium">expand_more</i></span><code class="language-json">[
    {
        "<a href="https://github.com/google/starthinker/tree/master/starthinker/task/dataset/run.py" target="_blank">dataset</a>": {
            "auth": {
                "field": {
                    "name": "auth_write",
                    "order": 1,
                    "default": "service",
                    "kind": "authentication",
                    "description": "Credentials used for writing data."
                }
            },
            "dataset": {
                "field": {
                    "name": "dataset",
                    "kind": "string",
                    "order": 1,
                    "description": "Place where tables will be created in BigQuery."
                }
            },
            "description": "Create a dataset where data will be combined and transfored for upload."
        }
    },
    {
        "<a href="https://github.com/google/starthinker/tree/master/starthinker/task/dbm/run.py" target="_blank">dbm</a>": {
            "report": {
                "body": {
                    "metadata": {
                        "format": "CSV",
                        "title": {
                            "field": {
                                "name": "recipe_name",
                                "prefix": "Monthly_Budget_Mover_",
                                "kind": "string",
                                "order": 1,
                                "description": "Name of report in DV360, should be unique."
                            }
                        },
                        "dataRange": "PREVIOUS_MONTH"
                    },
                    "timezoneCode": {
                        "field": {
                            "name": "recipe_timezone",
                            "default": "America/Los_Angeles",
                            "kind": "timezone",
                            "description": "Timezone for report dates."
                        }
                    },
                    "params": {
                        "groupBys": [
                            "FILTER_ADVERTISER_CURRENCY",
                            "FILTER_INSERTION_ORDER"
                        ],
                        "type": "TYPE_GENERAL",
                        "metrics": [
                            "METRIC_REVENUE_ADVERTISER"
                        ]
                    }
                },
                "timeout": 90,
                "filters": {
                    "FILTER_ADVERTISER": {
                        "values": {
                            "field": {
                                "name": "filter_ids",
                                "order": 7,
                                "default": "",
                                "kind": "integer_list",
                                "description": "The comma separated list of Advertiser Ids."
                            }
                        }
                    }
                }
            },
            "auth": {
                "field": {
                    "name": "auth_read",
                    "order": 1,
                    "default": "user",
                    "kind": "authentication",
                    "description": "Credentials used for reading data."
                }
            },
            "delete": false
        }
    },
    {
        "<a href="https://github.com/google/starthinker/tree/master/starthinker/task/monthly_budget_mover/run.py" target="_blank">monthly_budget_mover</a>": {
            "out_changes": {
                "bigquery": {
                    "schema": [],
                    "table": {
                        "field": {
                            "name": "recipe_name",
                            "kind": "string",
                            "prefix": "SDF_BUDGET_MOVER_LOG_",
                            "description": ""
                        }
                    },
                    "skip_rows": 0,
                    "dataset": {
                        "field": {
                            "name": "dataset",
                            "order": 8,
                            "default": "",
                            "kind": "string",
                            "description": "Dataset that you would like your output tables to be produced in."
                        }
                    },
                    "disposition": "WRITE_TRUNCATE"
                },
                "file": "/content/log.csv"
            },
            "budget_categories": {
                "field": {
                    "name": "budget_categories",
                    "order": 3,
                    "default": "{}",
                    "kind": "json",
                    "description": "A dictionary to show which IO Ids go under which Category. {\"CATEGORY1\":[12345,12345,12345], \"CATEGORY2\":[12345,12345]}"
                }
            },
            "is_colab": {
                "field": {
                    "name": "is_colab",
                    "order": 7,
                    "default": true,
                    "kind": "boolean",
                    "description": "Are you running this in Colab? (This will store the files in Colab instead of Bigquery)"
                }
            },
            "sdf": {
                "filter_type": "FILTER_TYPE_ADVERTISER_ID",
                "partner_id": {
                    "field": {
                        "name": "partner_id",
                        "kind": "integer",
                        "order": 1,
                        "description": "The sdf file types."
                    }
                },
                "file_types": "INSERTION_ORDER",
                "time_partitioned_table": false,
                "dataset": {
                    "field": {
                        "name": "dataset",
                        "order": 6,
                        "default": "",
                        "kind": "string",
                        "description": "Dataset to be written to in BigQuery."
                    }
                },
                "version": {
                    "field": {
                        "default": "5",
                        "choices": [
                            "SDF_VERSION_5",
                            "SDF_VERSION_5_1"
                        ],
                        "order": 6,
                        "name": "version",
                        "description": "The sdf version to be returned.",
                        "kind": "choice"
                    }
                },
                "create_single_day_table": false,
                "auth": "user",
                "read": {
                    "filter_ids": {
                        "single_cell": true,
                        "values": {
                            "field": {
                                "name": "filter_ids",
                                "order": 4,
                                "default": [],
                                "kind": "integer_list",
                                "description": "Comma separated list of filter ids for the request."
                            }
                        }
                    }
                },
                "table_suffix": ""
            },
            "excluded_ios": {
                "field": {
                    "name": "excluded_ios",
                    "kind": "integer_list",
                    "order": 4,
                    "description": "A comma separated list of Inserion Order Ids that should be exluded from the budget calculations"
                }
            },
            "report_name": {
                "field": {
                    "name": "recipe_name",
                    "prefix": "Monthly_Budget_Mover_",
                    "kind": "string",
                    "order": 1,
                    "description": "Name of report in DV360, should be unique."
                }
            },
            "out_old_sdf": {
                "bigquery": {
                    "schema": [],
                    "table": {
                        "field": {
                            "name": "recipe_name",
                            "kind": "string",
                            "prefix": "SDF_OLD_",
                            "description": ""
                        }
                    },
                    "skip_rows": 0,
                    "dataset": {
                        "field": {
                            "name": "dataset",
                            "order": 8,
                            "default": "",
                            "kind": "string",
                            "description": "Dataset that you would like your output tables to be produced in."
                        }
                    },
                    "disposition": "WRITE_TRUNCATE"
                },
                "file": "/content/old_sdf.csv"
            },
            "out_new_sdf": {
                "bigquery": {
                    "schema": [],
                    "table": {
                        "field": {
                            "name": "recipe_name",
                            "kind": "string",
                            "prefix": "SDF_NEW_",
                            "description": ""
                        }
                    },
                    "skip_rows": 0,
                    "dataset": {
                        "field": {
                            "name": "dataset",
                            "order": 8,
                            "default": "",
                            "kind": "string",
                            "description": "Dataset that you would like your output tables to be produced in."
                        }
                    },
                    "disposition": "WRITE_TRUNCATE"
                },
                "file": "/content/new_sdf.csv"
            },
            "auth": "user"
        }
    }
]</code></pre>
    </div>

  </div>

  <br/><br/>
  <h3 id="code-tasks">Run This Workflow In Minutes On Google Cloud</h3>
  <p class="flow-text">Everything from a quick Google Cloud UI to reference developer code for your team in one GitHub repository.</p>
  <p>
    <a href="https://github.com/google/starthinker/blob/master/tutorials/README.md#deployment" class="waves-effect waves-light btn blue form_button modal-trigger" target="_blank">
      Deployment Steps<i class="material-icons right">launch</i>
    </a>
    <a href="https://github.com/google/starthinker/blob/master/tutorials/README.md#development" class="waves-effect waves-light btn blue form_button modal-trigger" target="_blank">
      Developer Guide<i class="material-icons right">build</i>
    </a>
    <a href="https://google.github.io/starthinker/help/" class="waves-effect waves-light btn blue form_button modal-trigger" target="_blank">
      UI How To<i class="material-icons right">laptop</i>
    </a>
  </p>



    </div>

  </body>

  

<footer class="page-footer red lighten-1">
  <div class="footer-copyright">
    <div class="container center">
    &copy; 2019 Google LLC
    </div>
  </div>
</footer>


  <script type="text/javascript">
    $(document).ready(function() {
      M.AutoInit();
    });
  </script>

  
  <script type="text/javascript">
    $(document).ready(function() {
      $('span.expand_code').on('click tap', function() {
        $('pre.expand_code').css('height', 'auto');
        $(this).hide();
      });
    });
  </script>


</html>
