{
  "setup":{
    "license":"Apache License, Version 2.0",
    "copyright":"Copyright 2020 Google LLC"
  },
  "tasks":[
    { "google_api":{
      "auth":"user",
      "api":"gmail",
      "version":"v1",
      "function":"users.getProfile",
      "kwargs":{
        "userId":"me"
      },
      "iterate":false,
      "out": {
        "bigquery":{
          "auth": "service",
          "dataset":"Test",
          "table":"User_Profile",
          "format":"CSV"
        }
      }
    }},
    { "test": {
      "auth":"service",
      "bigquery":{
        "dataset":"Test",
        "table":"User_Profile",
        "schema": [
          {"mode": "NULLABLE", "name": "emailAddress", "type": "STRING"},
          {"mode": "NULLABLE", "name": "messagesTotal", "type": "INTEGER"},
          {"mode": "NULLABLE", "name": "threadsTotal", "type": "INTEGER"},
          {"mode": "NULLABLE", "name": "historyId", "type": "STRING"}
        ]
      }
    }}
  ]
}
